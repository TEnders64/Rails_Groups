<div id = 'container'>
	<div id = 'message'>

	</div>

	<div id='registration'>
		<h1>Register</h1>
		<form action="/users" method="post">
			<input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
			<label>First Name: 
			<input type="text" name="user[first_name]" />
			</label>
			<label>Last Name: 
			<input type="text" name="user[last_name]" />
			</label>
			<label>Email:
			<input type="text" name="user[email]" />
			</label>
			<label>Password:
			<input type="password" name="user[password]" />
			</label>
			<label>Confirm Password:
			<input type="password" name="user[password_confirm]" />
			</label>
			<input type="submit" value="Submit" />
		</form>
	</div>
	<div id='login'>
		<h1>Login</h1>
		<form action="/users" method="post">
			<input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
			<label>Email:
			<input type="text" name="users[email]" />
			</label>
			<label>Password:
			<input type="text" name="users[password]" />
			</label>
			<input type="submit" value="Submit" />
		</form>
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function(){

		//Set listener for form submission

		$('form').submit(function(){
			event.preventDefault();
			console.log('Form Submitted');

			//Identify which form was submitted

			var form = $(this).parent().attr('id')
			var data = $(this).serialize()

			var route

			if (form === 'login'){
				console.log('Login form');
				route = '/sessions/login'

			} else if (form === 'registration'){
				console.log('Registration form')
				route = '/users/create'
			}

			$.post(route, data, function(data){
				console.log('Data received from Ajax post request',data);
				if(!data.errors){
					$('#'+form).remove();
					$('#message').html("<p>"+data.message+"</p>");
				} else {
					$('#message').html('');
					for (msg in data.message){
						$('#message').append("<p>"+data.message[msg]+"</p>");
					}
				}
			}, 'json')

		})
	})
</script>